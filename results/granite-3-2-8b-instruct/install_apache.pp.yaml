- name: Apache configuration playbook
  hosts: localhost
  tasks:
    - name: Ensure httpd package is installed or absent based on 'disable' parameter.
      yum:
        name: "httpd"
        state: "{{ installed }}"
      when: ansible_os_family == "RedHat" and architecture == "x86_64"
      
    - name: Ensure httpd service is running or stopped based on 'disable' parameter.
      systemd:
        name: httpd
        enabled: yes
        state: "{{ ensure }}"
        
- name: Configure httpd
  hosts: localhost
  tasks:
    - name: Copy Apache config file
      copy:
        src: "{{ apacheconf }}"
        dest: "/etc/httpd/conf/httpd.conf"
        owner: root
        group: root
        mode: '0644'
      when: ansible_os_family == "RedHat"
